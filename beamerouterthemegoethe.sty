\mode<presentation>

\define@key{beamerframe}{noframenumbering}[true]{%
    \setbeamertemplate{footline}[none]%
    \addtocounter{framenumber}{-1}%
}

\DeclareOptionBeamer{footlineprefix}{\def\beamer@goethe@footlineprefix{#1}}
\ExecuteOptionsBeamer{footlineprefix=\@empty}
\ProcessOptionsBeamer

\newlength{\beamer@goethe@frametitlemargin}
\DeclareOptionBeamer{frametitlemargin}{\def\beamer@goethe@frametitlemargin{#1}}
\ExecuteOptionsBeamer{frametitlemargin={0.3cm}}

\newlength{\beamer@goethe@framefootermargin}
\DeclareOptionBeamer{framefootermargin}{\def\beamer@goethe@framefootermargin{#1}}
\ExecuteOptionsBeamer{framefootermargin={0.3cm}}

\ProcessOptionsBeamer\relax

\setbeamertemplate{footline}
{%
    \leavevmode
    \begin{beamercolorbox}[wd=.85\paperwidth,ht=2.25ex,dp=1ex,left]{section in head/foot}
        \usebeamerfont{section in head/foot}%
        \hspace*{\beamer@goethe@framefootermargin}%
        {\beamer@goethe@footlineprefix}%
        {\let\hyperlink\@secondoftwo\insertshortinstitute}%
        {\ifx\insertshortinstitute\@empty\else{~--~}\fi}%
        {\let\hyperlink\@secondoftwo\insertshortauthor}%
        {\ifx\insertshortauthor\@empty\else{~--~}\fi}%
        {\let\hyperlink\@secondoftwo\insertshorttitle}%
        {\ifx\insertshortsubtitle\@empty\else{~--~}\fi}%
        {\let\hyperlink\@secondoftwo\insertshortsubtitle}%
    \end{beamercolorbox}%
    \hspace*{-.01\paperwidth}%
    \begin{beamercolorbox}[wd=.16\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}
        \usebeamerfont{date in head/foot}
        {\insertframenumber{} / \inserttotalframenumber\hspace*{\beamer@goethe@framefootermargin}}
    \end{beamercolorbox}
}

\defbeamertemplate*{frametitle}{goethe}[1][left]
{%
    \ifbeamercolorempty[bg]{frametitle}{}{\nointerlineskip}%
    \@tempdima=\textwidth%
    \advance\@tempdima by\beamer@leftmargin%
    \advance\@tempdima by\beamer@rightmargin%
    \usebeamerfont{frametitle}%
    \begin{beamercolorbox}[ht=2.75ex,dp=1.25ex,#1,wd=\the\@tempdima]{frametitle}%
        \vbox{}\vskip-1ex%
        \if@tempswa\else\csname beamer@fte#1\endcsname\fi%
        \leftskip\beamer@goethe@frametitlemargin\strut\insertframetitle\strut\par%
    \end{beamercolorbox}%
    \vskip-2pt%
    \ifx\insertframesubtitle\@empty\else{%
        \usebeamerfont{framesubtitle}
        \begin{beamercolorbox}[ht=2.25ex,dp=1.15ex,#1,wd=\the\@tempdima]{framesubtitle}%
            \leftskip\beamer@goethe@frametitlemargin\strut\insertframesubtitle\strut\par%
            \vskip-1ex%
            \if@tempswa\else\vskip-.3cm\fi% set inside beamercolorbox... evil here...
        \end{beamercolorbox}%
    }\fi
}

\mode<all>
